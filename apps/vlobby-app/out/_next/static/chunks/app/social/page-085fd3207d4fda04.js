(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7674],{1865:function(e,t,s){Promise.resolve().then(s.bind(s,4628))},6026:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var i=s(909),n=s(585),l=s(2369);function a(e){let{badgeText:t="Under Construction",title:s="Exciting New Experience",description:a="We are working hard to bring you something amazing. Stay tuned!"}=e;return(0,i.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-4",children:[(0,i.jsxs)("div",{className:"space-y-4 text-center",children:[(0,i.jsx)(n.C,{color:"purple",size:"xs",children:t}),(0,i.jsx)("h1",{className:"text-xl font-semibold tracking-tighter sm:text-lg md:text-xl",children:s}),(0,i.jsx)("p",{className:"text-muted-foreground text-sm",children:a})]}),(0,i.jsx)(l.Vt,{})]})}},4628:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var i=s(909),n=s(151),l=s(233),a=s(4441),r=s(810),c=s(4928),o=s(6907),d=s(2369),u=s(585),x=s(8071),m=s(2892),h=s(2948),f=s(2755);function p(){let e=(0,a.aM)(r.h.announcements.getAllOccupantAnnouncements),t=e=>{var t,s,i,n,l,a;return({Alert:null===(t=f.Ly[0])||void 0===t?void 0:t.hex,Info:null===(s=f.Ly[1])||void 0===s?void 0:s.hex,Event:null===(i=f.Ly[2])||void 0===i?void 0:i.hex,Maintenance:null===(n=f.Ly[3])||void 0===n?void 0:n.hex,Other:null===(l=f.Ly[4])||void 0===l?void 0:l.hex})[e]||(null===(a=f.Ly[0])||void 0===a?void 0:a.hex)};return(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full",children:null==e?void 0:e.map(e=>(0,i.jsxs)(x.Zb,{className:"flex flex-col",children:[(0,i.jsx)(x.Ol,{children:(0,i.jsxs)(x.ll,{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,i.jsx)("div",{className:"w-4 h-4",children:(0,i.jsx)(d.CD,{})}),(0,i.jsx)("span",{className:"text-base font-medium",children:e.title})]}),(0,i.jsx)(u.C,{style:{backgroundColor:"".concat(t(e.type),"20"),border:"0.5px solid ".concat(t(e.type)),color:t(e.type)},children:e.type})]})}),(0,i.jsxs)(x.aY,{className:"flex-grow",children:[(0,i.jsx)("div",{className:"mb-2 text-sm text-gray-500",children:e.dateTime?(0,h.WU)(new Date(e.dateTime),"MMMM d, yyyy"):"Date not available"}),(0,i.jsx)(m.Z,{initialContent:e.content,isViewer:!0})]})]},e._id))})}var g=s(363),v=s(8521),j=s(9061),b=s(5144),N=s(2737),y=s(1292),w=s(2557),A=s(8),T=s(3632),z=s(1512),C=s(7338),S=s(4152);let _=S.z.object({_id:S.z.string().optional(),title:S.z.string().min(1,{message:"Title is required"}),content:S.z.string().min(1,{message:"Content is required"}),status:S.z.enum(["pending","approved","rejected"]),images:S.z.array(S.z.object({url:S.z.string().url(),storageId:S.z.string()})).default([]),isAdmin:S.z.boolean().optional(),authorId:S.z.string().optional(),_creationTime:S.z.string().optional()});var E=s(1772),O=e=>{let{selectedPost:t}=e,{toast:s}=(0,A.pm)(),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),m=(0,N.Z)(e=>e.closeDrawer),h=(0,a.Db)(r.h.feed.upsertFeedPost),f=(0,a.Db)(r.h.feed.deleteFeedPost),p=(0,y.cI)({resolver:(0,w.F)(_),defaultValues:null!=t?t:{title:"",content:"",images:[]}}),g=async e=>{c(!0);try{await h({...e,_id:null==t?void 0:t._id,images:e.images.map(e=>e.storageId),isAdmin:!1,status:"pending"}),c(!1),s({title:"Feed Post Saved",description:"The feed post has been successfully saved."}),p.reset(),t&&m()}catch(e){c(!1),s({title:"Error",description:"Failed to save the feed post. Please try again.",variant:"destructive"}),console.error("Error saving feed post:",e)}},v=async()=>{c(!0);try{await f({id:null==t?void 0:t._id}),s({title:"Feed Post Deleted",description:"The feed post has been successfully deleted."}),m()}catch(e){c(!1),s({title:"Error",description:"Failed to delete the feed post. Please try again.",variant:"destructive"}),console.error("Error deleting feed post:",e)}};return(0,i.jsx)(x.Zb,{className:"h-full w-full overflow-scroll border-none p-1 shadow-none",children:(0,i.jsx)(T.l0,{...p,children:(0,i.jsxs)("form",{onSubmit:p.handleSubmit(g),className:"w-full space-y-4",children:[(0,i.jsx)(T.Wi,{control:p.control,name:"title",render:e=>{let{field:t}=e;return(0,i.jsxs)(T.xJ,{children:[(0,i.jsx)(T.lX,{children:"Title"}),(0,i.jsx)(T.NI,{children:(0,i.jsx)(z.I,{placeholder:"Enter title",...t})}),(0,i.jsx)(T.zG,{})]})}}),(0,i.jsx)(T.Wi,{control:p.control,name:"content",render:e=>{let{field:t}=e;return(0,i.jsxs)(T.xJ,{children:[(0,i.jsx)(T.lX,{children:"Content"}),(0,i.jsx)(T.NI,{children:(0,i.jsx)(C.g,{placeholder:"Enter post content",...t})}),(0,i.jsx)(T.zG,{})]})}}),(0,i.jsx)("div",{className:"flex w-full",children:(0,i.jsx)(E.d,{name:"images",label:"Post Images (Max 20)",multiple:!0,maxFiles:20})}),(0,i.jsxs)(b.z,{type:"submit",disabled:l,children:[l?(0,i.jsx)(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}):null,t?"Update Feed Post":"Add Feed Post"]}),t&&(0,i.jsxs)("div",{className:"mt-8 rounded-md border border-destructive/20 p-4 transition-all duration-300 ease-in-out hover:border-destructive",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"Danger Zone"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Deleting this feed post is irreversible. Please proceed with caution."}),(0,i.jsxs)(b.z,{type:"button",variant:"destructive",onClick:v,disabled:l,className:"mt-4",children:[l?(0,i.jsx)(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Delete Feed Post"]})]})]})})})};function Z(){let e=(0,N.Z)(e=>e.openDrawer);return(0,i.jsxs)("div",{className:"flex flex-row w-full items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,i.jsx)("div",{className:"w-4 h-4 fill-foreground",children:(0,i.jsx)(d.$W,{})}),(0,i.jsx)("h2",{className:"text-base font-semibold",children:"Building Feed"})]}),(0,i.jsx)(b.z,{onClick:()=>{e("New Post","Create a new feed post",(0,i.jsx)(O,{}))},children:"New Post"})]})}function k(){let e=(0,a.aM)(r.h.feed.getAllFeedPosts);return(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full",children:[(0,i.jsx)(Z,{}),null==e?void 0:e.map(e=>(0,i.jsxs)(x.Zb,{children:[(0,i.jsxs)(x.Ol,{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"font-medium",children:e.title}),e.isAdmin&&(0,i.jsx)(u.C,{children:"Admin Post"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["By ","Not Configured"]}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,h.WU)(new Date(e._creationTime),"PPP")," â€¢"," ",(0,h.WU)(new Date(e._creationTime),"p")]})]})]}),(0,i.jsx)(x.aY,{children:(0,i.jsxs)("div",{className:"prose prose-gray dark:prose-invert",children:[(0,i.jsx)("p",{children:e.content}),e.images.length>0&&(0,i.jsx)("div",{className:(0,j.cn)("grid grid-cols-1 gap-4",e.images.length>1&&"md:grid-cols-2"),children:e.images.map((e,t)=>(0,i.jsx)("div",{className:"relative aspect-video w-full",children:(0,i.jsx)(v.default,{src:e.url,alt:"Post Image ".concat(t+1),fill:!0,className:"rounded-md object-cover",unoptimized:!0})},t))})]})})]},e._id))]})}var P=s(6026);function I(){return(0,i.jsx)("div",{className:"flex pt-20 flex-col items-center justify-center gap-4",children:(0,i.jsx)(P.Z,{badgeText:"Coming Soon",title:"Clubs Feature",description:"We're working on bringing you an exciting new Clubs feature. Stay tuned!"})})}var D=s(7277);function F(){let{isLoaded:e,isSignedIn:t,user:s}=(0,D.aF)(),{isLoaded:d}=(0,D.eW)({userMemberships:{infinite:!0}}),u=(0,l.useRouter)(),[x,m]=(0,n.useState)(""),[h,f]=(0,n.useState)("Announcements"),g=(0,a.aM)(r.h.offers.getAllOffersForUpdate);return((0,n.useEffect)(()=>{e&&!t&&u.push("/")},[e,t,u]),e&&d&&t&&s)?(0,i.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,i.jsx)("div",{className:"flex-grow overflow-auto",children:(0,i.jsxs)("div",{className:"flex flex-col gap-4 items-start justify-start pt-16 p-4 pb-[120px] w-full",children:[(0,i.jsx)(M,{offersCount:null==g?void 0:g.length}),(0,i.jsx)(L,{selectedOption:h,setSelectedOption:f}),"Announcements"===h&&(0,i.jsx)(p,{}),"Feed"===h&&(0,i.jsx)(k,{}),"Clubs"===h&&(0,i.jsx)(I,{})]})}),(0,i.jsx)(c.Z,{})]}):(0,i.jsx)(o.Z,{className:"w-4 h-4 animate-spin"})}function M(e){let{offersCount:t}=e;return(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,i.jsx)("div",{className:"w-5 h-5 fill-foreground",children:(0,i.jsx)(d.r,{})}),(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Social"}),(0,i.jsx)(u.C,{size:"sm",color:"blue",children:t})]})}function L(e){let{selectedOption:t,setSelectedOption:s}=e,n=[{name:"Announcements",icon:d.CD},{name:"Feed",icon:d.$W},{name:"Clubs",icon:d.b1}];return(0,i.jsx)("div",{className:"flex flex-row w-full",children:n.map(e=>{let n=t===e.name;return(0,i.jsxs)(g.E.div,{className:"flex flex-col gap-2 items-center p-4 rounded cursor-pointer flex-1 ".concat(n?"bg-primary text-white":"text-muted-foreground"),onClick:()=>s(e.name),initial:{opacity:.8},animate:{opacity:n?1:.8,scale:n?1.05:1},transition:{duration:.3},children:[(0,i.jsx)("div",{className:"w-4 h-4 ".concat(n?"fill-white":"fill-muted-foreground"),children:(0,i.jsx)(e.icon,{})}),(0,i.jsx)("p",{className:"text-sm",children:e.name})]},e.name)})})}},2225:function(e,t,s){"use strict";var i=s(4544);function n(){}function l(){}l.resetWarningCache=n,e.exports=function(){function e(e,t,s,n,l,a){if(a!==i){var r=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:n};return s.PropTypes=s,s}},3391:function(e,t,s){e.exports=s(2225)()},4544:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2892:function(e,t,s){"use strict";var i=s(909),n=s(151),l=s(8889),a=s(8964),r=s(1743),c=s(4979),o=s(4729),d=s(5957),u=s(5333),x=s(7556),m=s(8236),h=s(2453),f=s(82),p=s(3033),g=s(9159),v=s(1861),j=s(828),b=s(4096),N=s(6660),y=s(8777),w=s(7627),A=s(9030),T=s(5144);t.Z=e=>{let{onChange:t,initialContent:s="",isViewer:z=!1}=e,[C,S]=(0,n.useState)(""),[_,E]=(0,n.useState)(""),[O,Z]=(0,n.useState)(!1),[k,P]=(0,n.useState)(!1),I=(0,l.jE)({extensions:[a.Z,r.ZP,d.Z,u.I,x.Z,o.Z.configure({levels:[1,2,3,4]}),c.Z.configure({types:["heading","paragraph"]})],content:s,onUpdate:e=>{let{editor:s}=e;null==t||t(s.getHTML())},editorProps:{attributes:{class:z?"p-0":"rounded-sm border p-1 border-input min-h-[40rem] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"}},editable:!z});return I?(0,i.jsxs)("div",{className:"space-y-2",children:[!z&&(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().toggleBold().run(),className:I.isActive("bold")?"bg-accent":"",children:(0,i.jsx)(m.Z,{className:"h-4 w-4"})}),(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().toggleItalic().run(),className:I.isActive("italic")?"bg-accent":"",children:(0,i.jsx)(h.Z,{className:"h-4 w-4"})}),(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().toggleUnderline().run(),className:I.isActive("underline")?"is-active":"",children:(0,i.jsx)(f.Z,{className:"h-4 w-4"})}),(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().setTextAlign("left").run(),className:I.isActive({textAlign:"left"})?"is-active":"",children:(0,i.jsx)(p.Z,{className:"h-4 w-4"})}),(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().setTextAlign("center").run(),className:I.isActive({textAlign:"center"})?"bg-accent":"",children:(0,i.jsx)(g.Z,{className:"h-4 w-4"})}),(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().setTextAlign("right").run(),className:I.isActive({textAlign:"right"})?"bg-accent":"",children:(0,i.jsx)(v.Z,{className:"h-4 w-4"})}),(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().toggleBulletList().run(),className:I.isActive("bulletList")?"bg-accent":"",children:(0,i.jsx)(j.Z,{className:"h-4 w-4"})}),(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().toggleOrderedList().run(),className:I.isActive("orderedList")?"bg-accent":"",children:(0,i.jsx)(b.Z,{className:"h-4 w-4"})}),(0,i.jsxs)("div",{className:"relative h-8 w-8",children:[(0,i.jsx)("input",{type:"color",onChange:e=>I.chain().focus().setColor(e.target.value).run(),className:"absolute inset-0 cursor-pointer opacity-0"}),(0,i.jsx)("div",{className:"h-8 w-8 overflow-hidden rounded-full border border-input",style:{backgroundColor:I.getAttributes("textStyle").color||"#000000"}})]}),(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().toggleHeading({level:1}).run(),className:I.isActive("heading",{level:1})?"is-active":"",children:(0,i.jsx)(N.Z,{className:"h-4 w-4"})}),(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().toggleHeading({level:2}).run(),className:I.isActive("heading",{level:2})?"is-active":"",children:(0,i.jsx)(y.Z,{className:"h-4 w-4"})}),(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().toggleHeading({level:3}).run(),className:I.isActive("heading",{level:3})?"is-active":"",children:(0,i.jsx)(w.Z,{className:"h-4 w-4"})}),(0,i.jsx)(T.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I.chain().focus().toggleHeading({level:4}).run(),className:I.isActive("heading",{level:4})?"is-active":"",children:(0,i.jsx)(A.Z,{className:"h-4 w-4"})})]}),(0,i.jsx)(l.kg,{editor:I,className:"tiptap"})]}):null}},8:function(e,t,s){"use strict";s.d(t,{pm:function(){return x}});var i=s(151);let n=0,l=new Map,a=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},r=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?a(s):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=r(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||i()}}}),{id:s,dismiss:i,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function x(){let[e,t]=i.useState(o);return i.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[7311,9659,3230,7400,7801,3050,9811,1532,6556,2948,8521,4994,1029,4928,329,6251,2663,1744],function(){return e(e.s=1865)}),_N_E=e.O()}]);