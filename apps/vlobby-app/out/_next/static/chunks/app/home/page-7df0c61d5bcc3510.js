(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1951],{1141:function(e,l,s){Promise.resolve().then(s.bind(s,8049))},8049:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return k}});var i=s(909),t=s(151),a=s(7277),n=s(233),c=s(4441),r=s(810),d=s(2369),x=s(8071),o=s(6907),u=s(9061);function f(e){let{buildings:l}=e,{user:s}=(0,a.aF)(),t=(0,c.aM)(r.h.theme.getBannerImage);return(0,i.jsx)(x.Zb,{className:"flex w-full flex-col min-h-[150px] p-2 ".concat((null==t?void 0:t.url)?"":"bg-white"),style:(null==t?void 0:t.url)?{backgroundImage:"url(".concat(t.url,")"),backgroundSize:"cover",backgroundPosition:"center"}:{},children:(0,i.jsxs)(x.Ol,{children:[(0,i.jsxs)(x.ll,{className:(0,u.cn)("text-xl",(null==t?void 0:t.url)?"text-white":"text-black"),children:["Welcome back, ",null==s?void 0:s.firstName]}),(0,i.jsx)(x.SZ,{children:(0,i.jsxs)("div",{className:"flex flex-row gap-2 w-full",children:[(0,i.jsx)("div",{className:"w-4 h-4 ".concat((null==t?void 0:t.url)?"fill-white":"fill-black"," font-bold"),children:(0,i.jsx)(d.M4,{})}),(0,i.jsx)(m,{buildings:l,textColor:(null==t?void 0:t.url)?"text-white":"text-black"})]})})]})})}function m(e){var l;let{buildings:s,textColor:t}=e;return void 0===s?(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(o.Z,{className:"h-4 w-4 animate-spin text-primary"}),(0,i.jsx)("p",{className:t,children:"Gathering building information..."})]}):(0,i.jsx)("p",{className:t,children:s&&s.length>0?null===(l=s[0])||void 0===l?void 0:l.name:"No Building Connected"})}var h=s(4928);let j=(0,s(9501).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var v=s(131),p=s(585);let g=e=>{var l,s;let{space:t}=e;return(0,i.jsxs)(x.Zb,{className:"flex flex-col w-full",children:[(0,i.jsx)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,i.jsx)(x.ll,{className:"text-sm font-medium",children:t.spaceName})}),(0,i.jsxs)(x.aY,{children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)(j,{className:"h-4 w-4 text-muted-foreground"}),(0,i.jsx)(p.C,{size:"xs",children:t.typeName})]}),(0,i.jsxs)("div",{className:"mt-2 flex items-center space-x-4",children:[(0,i.jsx)(v.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,i.jsxs)("span",{className:"text-xs text-muted-foreground",children:[null!==(s=null===(l=t.totalUsersCount)||void 0===l?void 0:l.toString())&&void 0!==s?s:"0"," occupants"]})]})]})]})};function N(){let e=(0,c.aM)(r.h.spaces.getCurrentUserSpaces);return e?(0,i.jsxs)("div",{className:"flex flex-col gap-2 items-start w-full",children:[(0,i.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-start",children:[(0,i.jsx)("div",{className:"w-5 h-5 fill-foreground",children:(0,i.jsx)(d.wn,{})}),(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Spaces"}),(0,i.jsx)(p.C,{size:"xs",color:"purple",children:"Member of ".concat(e.length," Spaces")})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 w-full",children:e.map(e=>(0,i.jsx)(g,{space:e},e._id))})]}):(0,i.jsx)("div",{children:"Loading spaces..."})}let b=e=>{var l;let{facility:s}=e;return(0,i.jsxs)(x.Zb,{className:"relative h-48 w-36 rounded-lg overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:(null==s?void 0:null===(l=s.files[0])||void 0===l?void 0:l.url)?"url(".concat(s.files[0].url,")"):"linear-gradient(to right, #1847ED, #00A3FF)"}}),(0,i.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),(0,i.jsx)(x.aY,{className:"relative h-full flex flex-col justify-end p-4",children:(0,i.jsx)("h3",{className:"text-white text-lg font-semibold",children:s.name})})]})};function w(){let e=(0,c.aM)(r.h.facilities.getAllFacilities);return e?(0,i.jsxs)("div",{className:"flex flex-col gap-4 items-start w-full",children:[(0,i.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-start",children:[(0,i.jsx)("div",{className:"w-5 h-5 fill-foreground",children:(0,i.jsx)(d.BH,{})}),(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Facilities"}),(0,i.jsx)(p.C,{size:"xs",color:"purple",children:"".concat(e.length," Available")})]}),(0,i.jsx)("div",{className:"flex overflow-x-auto pb-4 w-full",children:(0,i.jsx)("div",{className:"flex gap-4",children:e.map(e=>(0,i.jsx)(b,{facility:e}))})})]}):(0,i.jsx)("div",{children:"Loading facilities..."})}var y=s(1795);function k(){let{isLoaded:e,isSignedIn:l,user:s}=(0,a.aF)(),{isLoaded:d,setActive:x,userMemberships:o}=(0,a.eW)({userMemberships:{infinite:!0}}),u=(0,n.useRouter)();(0,c.aM)(r.h.theme.getBannerImage);let m=(0,c.aM)(r.h.site.getAllSites);return((0,t.useEffect)(()=>{e&&!l&&u.push("/")},[e,l,u]),e&&d&&l&&s)?(0,i.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,i.jsx)("div",{className:"flex-grow overflow-auto",children:(0,i.jsxs)("div",{className:"flex flex-col gap-4 items-start justify-start pt-16 p-4 pb-[120px] w-full",children:[(0,i.jsx)(f,{buildings:m}),(0,i.jsx)(N,{}),(0,i.jsx)(w,{}),(0,i.jsx)(y.L,{})]})}),(0,i.jsx)(h.Z,{})]}):(0,i.jsx)(M,{})}function M(){return(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,i.jsx)(o.Z,{className:"h-16 w-16 animate-spin text-primary"})})}},131:function(e,l,s){"use strict";s.d(l,{Z:function(){return i}});let i=(0,s(9501).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[3230,7400,7801,3050,1532,6556,2948,4928,1795,6251,2663,1744],function(){return e(e.s=1141)}),_N_E=e.O()}]);