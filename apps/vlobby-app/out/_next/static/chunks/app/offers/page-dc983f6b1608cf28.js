(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5845],{7212:function(e,t,r){Promise.resolve().then(r.bind(r,9631))},9631:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var s=r(909),n=r(151),l=r(7277),i=r(233),a=r(4441),o=r(810),c=r(4928),d=r(5900),f=r(6907),u=r(1512),m=r(9061);function x(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,m.cn)("animate-pulse rounded-md bg-muted",t),...r})}var p=r(8521),h=r(585),g=r(8071),v=r(7955);function j(e){let{offer:t,imageUrl:r}=e,n=(0,a.aM)(o.h.offers.getOfferCategory,{id:t.type});return console.log("Offer category:",n),(0,s.jsxs)(g.Zb,{className:"flex flex-col justify-between gap-2 p-2 dark:border-none",children:[(0,s.jsxs)(v.o,{ratio:16/7,className:"relative",children:[(0,s.jsx)(p.default,{src:r,alt:t.title,fill:!0,className:"rounded-md object-cover",unoptimized:!0}),(0,s.jsx)("div",{className:"absolute left-2 top-2",children:(0,s.jsx)(h.C,{className:"flex flex-row gap-1",style:{backgroundColor:"white",border:"1px solid ".concat(t.colour),color:t.colour},children:null==n?void 0:n.name})})]}),(0,s.jsx)(g.ll,{className:"text-md font-medium",children:t.title}),(0,s.jsx)(g.SZ,{children:t.offerDescription})]})}var N=r(2369);function b(e){let{searchTerm:t,setSearchTerm:r}=e;return(0,s.jsxs)("div",{className:"relative mb-4 w-full",children:[(0,s.jsx)(d.Z,{className:"absolute left-2 top-3 h-6 w-4 text-muted-foreground"}),(0,s.jsx)(u.I,{type:"text",placeholder:"Search offers...",className:"pl-8 text-base h-12",value:t,onChange:e=>r(e.target.value)})]})}function w(e){let{offers:t,isLoading:r}=e;return r?(0,s.jsx)("div",{className:"grid w-full grid-cols-1 items-start justify-start gap-2 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,t)=>(0,s.jsx)(x,{className:"h-[200px] w-full"},t))}):t&&0!==t.length?(0,s.jsx)("div",{className:"grid w-full grid-cols-1 items-start justify-start gap-2 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>{var t,r;return(0,s.jsx)(j,{offer:e,imageUrl:null!==(r=null===(t=e.files[0])||void 0===t?void 0:t.url)&&void 0!==r?r:""},e._id)})}):(0,s.jsx)("p",{className:"col-span-full text-center text-muted-foreground",children:"No offers found."})}function y(){let{isLoaded:e,isSignedIn:t,user:r}=(0,l.aF)(),{isLoaded:d}=(0,l.eW)({userMemberships:{infinite:!0}}),f=(0,i.useRouter)(),[u,m]=(0,n.useState)(""),x=(0,a.aM)(o.h.offers.getAllOffersForUpdate);(0,n.useEffect)(()=>{e&&!t&&f.push("/")},[e,t,f]);let p=(0,n.useMemo)(()=>x?x.filter(e=>e.title.toLowerCase().includes(u.toLowerCase())):[],[x,u]);return e&&d&&t&&r?(0,s.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,s.jsx)("div",{className:"flex-grow overflow-auto",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 items-start justify-start pt-16 p-4 pb-[120px] w-full",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsx)("div",{className:"w-5 h-5 fill-foreground",children:(0,s.jsx)(N.MM,{})}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Site Offers"}),(0,s.jsx)(h.C,{size:"sm",color:"blue",children:null==x?void 0:x.length})]}),(0,s.jsx)(b,{searchTerm:u,setSearchTerm:m}),(0,s.jsx)(w,{offers:p,isLoading:void 0===x})]})}),(0,s.jsx)(c.Z,{})]}):(0,s.jsx)(C,{})}function C(){return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)(f.Z,{className:"h-16 w-16 animate-spin text-primary"})})}},5900:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9501).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},585:function(e,t,r){"use strict";r.d(t,{C:function(){return s.Z}});var s=r(9722)},810:function(e,t,r){"use strict";r.d(t,{h:function(){return s}});let s=r(6979).qL},7955:function(e,t,r){"use strict";r.d(t,{o:function(){return s}});let s=r(8766).f},8071:function(e,t,r){"use strict";r.d(t,{Ol:function(){return a},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return f},ll:function(){return o}});var s=r(909),n=r(151),l=r(9061);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border border-muted bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let a=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...n})});a.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent";let f=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...n})});f.displayName="CardFooter"},1512:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(909),n=r(151),l=r(9061);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},9061:function(e,t,r){"use strict";r.d(t,{cn:function(){return l}});var s=r(7838),n=r(3230);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},8766:function(e,t,r){"use strict";r.d(t,{f:function(){return a}});var s=r(151),n=r(3553),l=r(909),i=s.forwardRef((e,t)=>{let{ratio:r=1,style:s,...i}=e;return(0,l.jsx)("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/r}%`},"data-radix-aspect-ratio-wrapper":"",children:(0,l.jsx)(n.WV.div,{...i,ref:t,style:{...s,position:"absolute",top:0,right:0,bottom:0,left:0}})})});i.displayName="AspectRatio";var a=i},3553:function(e,t,r){"use strict";r.d(t,{WV:function(){return a},jH:function(){return o}});var s=r(151),n=r(664),l=r(1875),i=r(909),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=s.forwardRef((e,r)=>{let{asChild:s,...n}=e,a=s?l.g7:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(a,{...n,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function o(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[3230,7400,7801,3050,1532,6556,8521,4928,6251,2663,1744],function(){return e(e.s=7212)}),_N_E=e.O()}]);